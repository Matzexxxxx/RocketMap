$(function () {
    'use strict'
	/*Eigene Einstellungen########################################################################################################*/
	//
	Store.set('showActiveRaidsOnly', false)
	Store.set('showOpenGymsOnly', false)
	Store.set('showTeamGymsOnly', 0)
	Store.set('showLastUpdatedGymsOnly', 0)
	Store.set('showScanned', false)
	Store.set('showRanges', false)
	Store.set('processPokemonChunkSize', 250)
	
// Geofences
console.log('geofence > initialising #geofence-switch, but first checking if we have a map')
// check if we're on the map
if(window.map) {
    var wolfsburgPolygon;
    var recklinghausenPolygon;
    var bamberg0Polygon;
    var bamberg1Polygon;
    var bamberg2Polygon;
    var bamberg3Polygon;
    var bamberg4Polygon;
    var gardelegen0Polygon;
    var gardelegen1Polygon;
    var duempten0Polygon;
    var duempten1Polygon;
    var duempten2Polygon;
    var duempten3Polygon;
    var duempten4Polygon;
    var duempten5Polygon;
    var kloetze0Polygon;
    var kloetze1Polygon;
    var kloetze2Polygon;

    var updateGeofences = function() {
        if(!Store.get('showGeofence')) {
            if(wolfsburgPolygon) {
                console.log('geofence > setting wolfsburgPolygons map to null')
                wolfsburgPolygon.setMap(null);
                recklinghausenPolygon.setMap(null);
                bamberg0Polygon.setMap(null);
                bamberg1Polygon.setMap(null);
                bamberg2Polygon.setMap(null);
                bamberg3Polygon.setMap(null);
                bamberg4Polygon.setMap(null);
                gardelegen0Polygon.setMap(null);
                gardelegen1Polygon.setMap(null);
                duempten0Polygon.setMap(null);
                duempten1Polygon.setMap(null);
                duempten2Polygon.setMap(null);
                duempten3Polygon.setMap(null);
                duempten4Polygon.setMap(null);
                duempten5Polygon.setMap(null);
                kloetze0Polygon.setMap(null);
                kloetze1Polygon.setMap(null);
                kloetze2Polygon.setMap(null);
            }
        } else {
            if(wolfsburgPolygon == null) {
                console.log('geofence > initialising wolfsburgPolygons')
				var recklinghausenCoords = [
                        {lat: 51.5468421220543, lng: 7.1789860725403},
                        {lat: 51.5486706277671, lng: 7.2125042974949},
                        {lat: 51.5736695809743, lng: 7.28958344087},
                        {lat: 51.6275414641329, lng: 7.3045346121944},
                        {lat: 51.64890222932, lng: 7.2893108401313},
                        {lat: 51.6679437895164, lng: 7.2597316595759},
                        {lat: 51.6611650896544, lng: 7.2482324979057},
                        {lat: 51.6549312801381, lng: 7.2279306503752},
                        {lat: 51.663372432926, lng: 7.2134694310084},
                        {lat: 51.6789916124312, lng: 7.1585436624255},
                        {lat: 51.6464390205829, lng: 7.1482804935341},
                        {lat: 51.6411392832197, lng: 7.151499477501},
                        {lat: 51.6408460130846, lng: 7.1556182614613},
                        {lat: 51.6390890764685, lng: 7.1559189559729},
                        {lat: 51.6389290363304, lng: 7.1530867606075},
                        {lat: 51.6300328073601, lng: 7.1584088355303},
                        {lat: 51.6287281989391, lng: 7.1507693179785},
                        {lat: 51.6453995176441, lng: 7.1426158493115},
                        {lat: 51.6464394339671, lng: 7.1482802412771},
                        {lat: 51.6789916300728, lng: 7.1585425873985},
                        {lat: 51.6956019115456, lng: 7.1455767512402},
                        {lat: 51.7003827169327, lng: 7.1319378992756},
                        {lat: 51.7149098522406, lng: 7.126003451011},
                        {lat: 51.6916029334394, lng: 7.0686719000524},
                        {lat: 51.6869790762555, lng: 7.0749368431668},
                        {lat: 51.6934157397095, lng: 7.1048064267073},
                        {lat: 51.6791553431384, lng: 7.1132179488748},
                        {lat: 51.6725037896533, lng: 7.0813753574323},
                        {lat: 51.6869789531588, lng: 7.0749363823137},
                        {lat: 51.6916033941506, lng: 7.068671483866},
                        {lat: 51.6730326704867, lng: 7.0230080181093},
                        {lat: 51.6440771938801, lng: 7.029785132579},
                        {lat: 51.6241554074777, lng: 7.0404462417355},
                        {lat: 51.6162228914076, lng: 7.0585441589355},
                        {lat: 51.6069836837308, lng: 7.0720624923706},
                        {lat: 51.5930621923486, lng: 7.0949363708496},
                        {lat: 51.5776629459425, lng: 7.1251595020294},
                        {lat: 51.5449472372336, lng: 7.1442487835884},
                        {lat: 51.5468421220543, lng: 7.1789860725403}
					];
                var wolfsburgCoords = [
                        {lat: 52.4339321303583, lng: 10.7891964912415},
                        {lat: 52.4305175375402, lng: 10.7895612716675},
                        {lat: 52.4279942402278, lng: 10.7637755200267},
                        {lat: 52.4314161832828, lng: 10.7584275305271},
                        {lat: 52.4312138056081, lng: 10.738817229867},
                        {lat: 52.4309831782501, lng: 10.7352907746099},
                        {lat: 52.427367827126, lng: 10.7317098160274},
                        {lat: 52.4271000238245, lng: 10.7166511916512},
                        {lat: 52.4273924278347, lng: 10.715787017672},
                        {lat: 52.4263964283919, lng: 10.6775095016928},
                        {lat: 52.4209706431248, lng: 10.6752670073183},
                        {lat: 52.4173576163427, lng: 10.6755558346049},
                        {lat: 52.4071845383409, lng: 10.6745062847767},
                        {lat: 52.406517446319, lng: 10.6802168754075},
                        {lat: 52.4093875012249, lng: 10.6874280595821},
                        {lat: 52.4046217820643, lng: 10.6911411453621},
                        {lat: 52.3898738761681, lng: 10.6835447037884},
                        {lat: 52.3744014481468, lng: 10.6706162435148},
                        {lat: 52.3517503987192, lng: 10.6595010629462},
                        {lat: 52.3451985451131, lng: 10.6648070431697},
                        {lat: 52.3421807946372, lng: 10.6723085311842},
                        {lat: 52.3388636455876, lng: 10.6655828854286},
                        {lat: 52.3260002779804, lng: 10.6488371806711},
                        {lat: 52.3160158517598, lng: 10.6485538706812},
                        {lat: 52.3025505954152, lng: 10.6518776297335},
                        {lat: 52.3032812547344, lng: 10.6709738678564},
                        {lat: 52.3077171414689, lng: 10.6703000883622},
                        {lat: 52.3079161856187, lng: 10.6637860712538},
                        {lat: 52.3121260719012, lng: 10.6616097013638},
                        {lat: 52.3178584623656, lng: 10.6661371810909},
                        {lat: 52.3215697669476, lng: 10.6748500510253},
                        {lat: 52.3304551959702, lng: 10.6818870782486},
                        {lat: 52.3456898615714, lng: 10.7117125036058},
                        {lat: 52.3558801450387, lng: 10.7374439421767},
                        {lat: 52.354937004678, lng: 10.7584592562384},
                        {lat: 52.3494711961937, lng: 10.7605728369422},
                        {lat: 52.3429669403169, lng: 10.7782676002118},
                        {lat: 52.3423598685074, lng: 10.7834241954034},
                        {lat: 52.3507947076991, lng: 10.7902693460476},
                        {lat: 52.3642818302012, lng: 10.7609500329064},
                        {lat: 52.378362989473, lng: 10.7613663934171},
                        {lat: 52.3852629142782, lng: 10.7814915105701},
                        {lat: 52.3936985617091, lng: 10.7970876339823},
                        {lat: 52.4100047906701, lng: 10.8046138286591},
                        {lat: 52.4089023079516, lng: 10.815459843725},
                        {lat: 52.4038202641377, lng: 10.8208126947284},
                        {lat: 52.3945971907511, lng: 10.8219053596258},
                        {lat: 52.394271069651, lng: 10.8132760226727},
                        {lat: 52.3886951308336, lng: 10.8025404810905},
                        {lat: 52.3862379913097, lng: 10.7956606149673},
                        {lat: 52.3817424307029, lng: 10.7899689674377},
                        {lat: 52.3779046344369, lng: 10.7993030548096},
                        {lat: 52.3794764684604, lng: 10.8131217956543},
                        {lat: 52.3889062976683, lng: 10.819730758667},
                        {lat: 52.39189199037, lng: 10.8421325683594},
                        {lat: 52.383562975075, lng: 10.8493423461914},
                        {lat: 52.3829866957682, lng: 10.856294631958},
                        {lat: 52.3837725293216, lng: 10.8579254150391},
                        {lat: 52.3947465427716, lng: 10.8628177642822},
                        {lat: 52.3974307011313, lng: 10.8615303039551},
                        {lat: 52.4039931080382, lng: 10.8616375923157},
                        {lat: 52.4072559465444, lng: 10.8674955368042},
                        {lat: 52.4163984629978, lng: 10.8724308013916},
                        {lat: 52.4181259697368, lng: 10.8711218833923},
                        {lat: 52.4176810123507, lng: 10.8626997470856},
                        {lat: 52.4198926679919, lng: 10.8623510599136},
                        {lat: 52.4203768618214, lng: 10.8651781082153},
                        {lat: 52.4221827270431, lng: 10.8710789680481},
                        {lat: 52.4233604253821, lng: 10.8720874786377},
                        {lat: 52.4251956092502, lng: 10.8729296922684},
                        {lat: 52.4271877277188, lng: 10.8742010593414},
                        {lat: 52.4281624918009, lng: 10.8748984336853},
                        {lat: 52.4275508135034, lng: 10.8765560388565},
                        {lat: 52.4277765139704, lng: 10.8782136440277},
                        {lat: 52.4303474551191, lng: 10.879168510437},
                        {lat: 52.4355935415262, lng: 10.8754563331604},
                        {lat: 52.4389554181717, lng: 10.8695983886719},
                        {lat: 52.4446059325045, lng: 10.8645987510681},
                        {lat: 52.4526553556554, lng: 10.8740615844727},
                        {lat: 52.4606248621107, lng: 10.8837389945984},
                        {lat: 52.465645106701, lng: 10.8898866176605},
                        {lat: 52.4705732794972, lng: 10.8963990211487},
                        {lat: 52.4748735417615, lng: 10.9033834934235},
                        {lat: 52.4794347588594, lng: 10.9138870239258},
                        {lat: 52.4812774087446, lng: 10.9099495410919},
                        {lat: 52.4852270843781, lng: 10.898976624012},
                        {lat: 52.4821317317516, lng: 10.8962796628475},
                        {lat: 52.4795384916432, lng: 10.9050592035055},
                        {lat: 52.4744356923264, lng: 10.8959001302719},
                        {lat: 52.469837703858, lng: 10.8906930405647},
                        {lat: 52.4650562136051, lng: 10.8846705593169},
                        {lat: 52.458365976414, lng: 10.876364648575},
                        {lat: 52.4510993326686, lng: 10.8678870764561},
                        {lat: 52.4386031056127, lng: 10.8516185777262},
                        {lat: 52.4373940217061, lng: 10.8494710215018},
                        {lat: 52.4374407160601, lng: 10.8476238726871},
                        {lat: 52.4394177506797, lng: 10.8448307972867},
                        {lat: 52.4410171949335, lng: 10.8440297073685},
                        {lat: 52.4423549874255, lng: 10.8453958423343},
                        {lat: 52.4506242370398, lng: 10.8549158927053},
                        {lat: 52.4577130274975, lng: 10.8620541309938},
                        {lat: 52.4590176260459, lng: 10.8633988082875},
                        {lat: 52.4604660039835, lng: 10.8647434855811},
                        {lat: 52.4611662164778, lng: 10.8620684221387},
                        {lat: 52.464819673682, lng: 10.864400099963},
                        {lat: 52.4704371534873, lng: 10.8727757167071},
                        {lat: 52.4765767019547, lng: 10.8802930265665},
                        {lat: 52.4812006332068, lng: 10.884298235178},
                        {lat: 52.478947946623, lng: 10.8941969275475},
                        {lat: 52.4853152864855, lng: 10.8988881111145},
                        {lat: 52.4882160572385, lng: 10.8971929550171},
                        {lat: 52.4934944465227, lng: 10.8980941772461},
                        {lat: 52.4966298233725, lng: 10.8926868438721},
                        {lat: 52.4938602520083, lng: 10.8792972564697},
                        {lat: 52.4867003630514, lng: 10.8704996109009},
                        {lat: 52.4837210877726, lng: 10.8613157272339},
                        {lat: 52.4858379620114, lng: 10.8519816398621},
                        {lat: 52.4914040710867, lng: 10.8405876159668},
                        {lat: 52.4913518104277, lng: 10.8328628540039},
                        {lat: 52.4874582166738, lng: 10.8305883407593},
                        {lat: 52.4850147452458, lng: 10.8334851264954},
                        {lat: 52.4812120678699, lng: 10.8423900604248},
                        {lat: 52.4770659909429, lng: 10.8618628978729},
                        {lat: 52.4743650315149, lng: 10.8683310449123},
                        {lat: 52.4726311511971, lng: 10.8633837103844},
                        {lat: 52.4718036026089, lng: 10.8598405122757},
                        {lat: 52.4720695145381, lng: 10.8555369079113},
                        {lat: 52.4719171565939, lng: 10.850889980793},
                        {lat: 52.4680569737354, lng: 10.8423686027527},
                        {lat: 52.458099815701, lng: 10.8312696218491},
                        {lat: 52.4590199626513, lng: 10.8278954029083},
                        {lat: 52.4638062961183, lng: 10.8243696391582},
                        {lat: 52.4701607132502, lng: 10.8235904574394},
                        {lat: 52.4715748598789, lng: 10.8307868242264},
                        {lat: 52.4775397547283, lng: 10.831789970398},
                        {lat: 52.4836426830667, lng: 10.8265113830566},
                        {lat: 52.4838256271632, lng: 10.8196449279785},
                        {lat: 52.4802711485139, lng: 10.8150100708008},
                        {lat: 52.4726907863776, lng: 10.8126068115234},
                        {lat: 52.4631350559672, lng: 10.8176708221436},
                        {lat: 52.4560878465886, lng: 10.8187866210938},
                        {lat: 52.4590036191787, lng: 10.8096027374268},
                        {lat: 52.4682465186599, lng: 10.8080577850342},
                        {lat: 52.471592832565, lng: 10.7971572875977},
                        {lat: 52.4709523468576, lng: 10.7887780666351},
                        {lat: 52.4689589388354, lng: 10.7788378000259},
                        {lat: 52.4728247610094, lng: 10.7751551270485},
                        {lat: 52.4797761776506, lng: 10.7733996212482},
                        {lat: 52.4855811550493, lng: 10.7717704202514},
                        {lat: 52.4907888943779, lng: 10.7631006615702},
                        {lat: 52.4919021343152, lng: 10.7621112315974},
                        {lat: 52.492959431697, lng: 10.7688666717854},
                        {lat: 52.4998998163247, lng: 10.7768693067101},
                        {lat: 52.5048300414737, lng: 10.7762636885855},
                        {lat: 52.5087512824412, lng: 10.7637028313735},
                        {lat: 52.5073438448037, lng: 10.7565493075356},
                        {lat: 52.5004986846131, lng: 10.7499495506909},
                        {lat: 52.4949840669747, lng: 10.7502013894941},
                        {lat: 52.4913844954758, lng: 10.7586135647398},
                        {lat: 52.4917121251022, lng: 10.7608804028132},
                        {lat: 52.4904207985807, lng: 10.7619538967265},
                        {lat: 52.4850483061264, lng: 10.7699910155497},
						{lat: 52.4797803381653, lng: 10.7712181261741},
						{lat: 52.4797492236318, lng: 10.76565541327},
						{lat: 52.476285494824, lng: 10.7601954415441},
						{lat: 52.4709983003836, lng: 10.7605982758105},
						{lat: 52.4682726627234, lng: 10.7649064064026},
						{lat: 52.4659849984018, lng: 10.7711613178253},
						{lat: 52.4621806762083, lng: 10.7752704620361},
						{lat: 52.4521257475162, lng: 10.7687044143677},
						{lat: 52.4566599023996, lng: 10.7556259632111},
						{lat: 52.4606787935614, lng: 10.7510608434677},
						{lat: 52.4624004795448, lng: 10.7437571883202},
						{lat: 52.460033041815, lng: 10.7417274266481},
						{lat: 52.4611714129369, lng: 10.7369155855849},
						{lat: 52.4619904045481, lng: 10.733689427725},
						{lat: 52.4627971885478, lng: 10.7338960107381},
						{lat: 52.4645346186673, lng: 10.7288400273865},
						{lat: 52.4684006105752, lng: 10.7284967381929},
						{lat: 52.4700227037039, lng: 10.712347224835},
						{lat: 52.4681411248478, lng: 10.7112369245442},
						{lat: 52.4617671590483, lng: 10.7058383167396},
						{lat: 52.4598770594345, lng: 10.7090093667375},
						{lat: 52.4543885776877, lng: 10.7101157947363},
						{lat: 52.4531828845911, lng: 10.7133854410858},
						{lat: 52.4543895995611, lng: 10.7170769983895},
						{lat: 52.4586193122038, lng: 10.7158767434157},
						{lat: 52.4548601268963, lng: 10.7285804842923},
						{lat: 52.4554861285119, lng: 10.7321828317072},
						{lat: 52.4614604410611, lng: 10.7335832132958},
						{lat: 52.4592186375049, lng: 10.7411738857627},
						{lat: 52.4582407808461, lng: 10.7404915988445},
						{lat: 52.4554808463858, lng: 10.7410474866629},
						{lat: 52.454132994073, lng: 10.7469248771667},
						{lat: 52.4477186377419, lng: 10.7643699645996},
						{lat: 52.4440304503027, lng: 10.7644557952881},
						{lat: 52.4417284463176, lng: 10.7778453826904},
						{lat: 52.4416761266473, lng: 10.7917499542236},
						{lat: 52.4418036557349, lng: 10.7928228378296},
						{lat: 52.4390813200476, lng: 10.7947540283203},
						{lat: 52.4368559104957, lng: 10.7972860336304},
						{lat: 52.4344946624129, lng: 10.7972860336304},
						{lat: 52.4339321303583, lng: 10.7891964912415}
					];
                var bamberg0Coords = [
                        {lat: 49.937521699543, lng: 10.8489171927491},
                        {lat: 49.9436532343732, lng: 10.8720615632935},
                        {lat: 49.9338755521333, lng: 10.873416896637},
                        {lat: 49.9352014558403, lng: 10.8907347380371},
                        {lat: 49.9226177125367, lng: 10.9008824669493},
                        {lat: 49.9194263619363, lng: 10.9045110635375},
                        {lat: 49.9135819125817, lng: 10.9115668876648},
                        {lat: 49.9214572458514, lng: 10.9247830636899},
                        {lat: 49.9167252919419, lng: 10.926944809738},
                        {lat: 49.9130706622801, lng: 10.9286090293272},
                        {lat: 49.9089528270976, lng: 10.9265999658203},
                        {lat: 49.9071131604333, lng: 10.9200221321069},
                        {lat: 49.9044312671358, lng: 10.920521494379},
                        {lat: 49.9050112769861, lng: 10.9249788792507},
                        {lat: 49.9038361343667, lng: 10.9266213090743},
                        {lat: 49.9023815264209, lng: 10.9310743904571},
                        {lat: 49.9036651079168, lng: 10.944562980175},
                        {lat: 49.8980381723611, lng: 10.9478297179642},
                        {lat: 49.8882477791926, lng: 10.9490906062011},
                        {lat: 49.8880334949369, lng: 10.9489246948243},
                        {lat: 49.8876502866483, lng: 10.948896242691},
                        {lat: 49.8867140705138, lng: 10.9486062984925},
                        {lat: 49.8850627950315, lng: 10.9485413942261},
                        {lat: 49.8820919122994, lng: 10.948154093628},
                        {lat: 49.8788598543488, lng: 10.9473794924315},
                        {lat: 49.8752438411206, lng: 10.9473353270873},
                        {lat: 49.8708807572588, lng: 10.9496495056762},
                        {lat: 49.8628035175139, lng: 10.9324803679808},
                        {lat: 49.8562466826453, lng: 10.9199071721191},
                        {lat: 49.8663167295387, lng: 10.9044546481932},
                        {lat: 49.8679764258802, lng: 10.8738165924071},
                        {lat: 49.8689436913513, lng: 10.8709535279636},
                        {lat: 49.865785312108, lng: 10.8603829204363},
                        {lat: 49.8622782125499, lng: 10.8739771942768},
                        {lat: 49.8529266193756, lng: 10.8679709893308},
                        {lat: 49.8539804867652, lng: 10.8644485905102},
                        {lat: 49.8624994918254, lng: 10.8319211237431},
                        {lat: 49.8712408945369, lng: 10.8390467680517},
                        {lat: 49.86612957791, lng: 10.858980103322},
                        {lat: 49.8694770188983, lng: 10.869354844192},
                        {lat: 49.8738678873383, lng: 10.8563078819579},
                        {lat: 49.88202623627, lng: 10.850721637207},
                        {lat: 49.8850126769436, lng: 10.85845539917},
                        {lat: 49.8952978918449, lng: 10.8672071293945},
                        {lat: 49.8952702463558, lng: 10.8546773488767},
                        {lat: 49.8987810967574, lng: 10.8433431979979},
                        {lat: 49.9066173884944, lng: 10.8497932496334},
                        {lat: 49.9066968505418, lng: 10.861965937225},
                        {lat: 49.9048968303228, lng: 10.8749909317014},
                        {lat: 49.9063738192292, lng: 10.8760990955657},
                        {lat: 49.9107250593284, lng: 10.8641489947813},
                        {lat: 49.9168841826008, lng: 10.8582792377929},
                        {lat: 49.9290343126952, lng: 10.8658980863952},
                        {lat: 49.9271487911511, lng: 10.8536002152709},
                        {lat: 49.937521699543, lng: 10.8489171927491}
					];
                var bamberg1Coords = [
                        {lat: 49.9303672559487, lng: 10.9449684619904},
                        {lat: 49.9301807842398, lng: 10.9433064924011},
                        {lat: 49.9268310769629, lng: 10.9404536220093},
                        {lat: 49.9229630841323, lng: 10.9550448390503},
                        {lat: 49.9268034495432, lng: 10.9574031829834},
                        {lat: 49.9303672559487, lng: 10.9449684619904}
					];
                var bamberg2Coords = [
                        {lat: 49.897129370219, lng: 10.9313642978668},
                        {lat: 49.8985634038169, lng: 10.9312751027603},
                        {lat: 49.8985461265573, lng: 10.9403054183044},
                        {lat: 49.8950836388899, lng: 10.9423079818116},
                        {lat: 49.8945860154526, lng: 10.9387005928957},
                        {lat: 49.8943553445145, lng: 10.9361331563683},
                        {lat: 49.8898402734682, lng: 10.9374735775921},
                        {lat: 49.8896220461624, lng: 10.941782987131},
                        {lat: 49.8882397065918, lng: 10.9415822394042},
                        {lat: 49.88863561008, lng: 10.9334743185403},
                        {lat: 49.8900503199095, lng: 10.9334279841397},
                        {lat: 49.8898961376638, lng: 10.9363308832217},
                        {lat: 49.8942905491088, lng: 10.9352608759385},
                        {lat: 49.8942369848411, lng: 10.9347608600617},
                        {lat: 49.8937082504923, lng: 10.9293600055237},
                        {lat: 49.8936028485081, lng: 10.9283665881882},
                        {lat: 49.897129370219, lng: 10.9313642978668}
					];
                var bamberg3Coords = [
                        {lat: 49.9298699964552, lng: 10.8685596915741},
                        {lat: 49.9303120051472, lng: 10.8686552510986},
                        {lat: 49.9349114175218, lng: 10.8668947219849},
                        {lat: 49.9350080971552, lng: 10.8570456504822},
                        {lat: 49.928875462077, lng: 10.8569169044495},
                        {lat: 49.9298699964552, lng: 10.8685596915741}
					];
                var bamberg4Coords = [
                        {lat: 49.882689905719, lng: 10.8646651240845},
                        {lat: 49.8775669705864, lng: 10.8674673502961},
                        {lat: 49.8782134167948, lng: 10.8705367974092},
                        {lat: 49.8769853344489, lng: 10.8720927286379},
                        {lat: 49.8749231785736, lng: 10.8719728375677},
                        {lat: 49.8732386490218, lng: 10.8722508503683},
                        {lat: 49.8723306729929, lng: 10.8721055426131},
                        {lat: 49.8703566029526, lng: 10.8730426233125},
                        {lat: 49.8712819634743, lng: 10.8779145679036},
                        {lat: 49.8720350554244, lng: 10.8801359634781},
                        {lat: 49.8725806973744, lng: 10.8807480336436},
                        {lat: 49.8738495550398, lng: 10.8827161438999},
                        {lat: 49.8748418081724, lng: 10.8800386681423},
                        {lat: 49.8750169374774, lng: 10.8799060477477},
                        {lat: 49.8765602266783, lng: 10.879616456572},
                        {lat: 49.8759417423903, lng: 10.8820790395802},
                        {lat: 49.8757415593285, lng: 10.8828250088188},
                        {lat: 49.8768929187869, lng: 10.8839972917247},
                        {lat: 49.8777780671755, lng: 10.8841717928769},
                        {lat: 49.8784970495615, lng: 10.879336358814},
                        {lat: 49.8781616745445, lng: 10.8767539803237},
                        {lat: 49.8790534382423, lng: 10.8741641439973},
                        {lat: 49.8840725211016, lng: 10.8709562220155},
                        {lat: 49.882689905719, lng: 10.8646651240845}
					];
                var gardelegen0Coords = [
                        {lat: 52.5578831718813, lng: 11.3532516360283},
                        {lat: 52.5580731514546, lng: 11.3612476285198},
                        {lat: 52.5591833171877, lng: 11.3612198415285},
                        {lat: 52.5588730672032, lng: 11.3584035789174},
                        {lat: 52.5823485744978, lng: 11.3505946768278},
                        {lat: 52.5833913213434, lng: 11.3631238557647},
                        {lat: 52.5610160135026, lng: 11.3778826081144},
                        {lat: 52.5592650805789, lng: 11.3619791651149},
                        {lat: 52.558088687384, lng: 11.3619714346714},
                        {lat: 52.5593947813839, lng: 11.4177996665239},
                        {lat: 52.5458785403195, lng: 11.4110190421343},
                        {lat: 52.5552723838408, lng: 11.4215755462646},
                        {lat: 52.5541243054442, lng: 11.4254379272461},
                        {lat: 52.5350200485532, lng: 11.4261245727539},
                        {lat: 52.5292636529774, lng: 11.4342999458313},
                        {lat: 52.5323573199037, lng: 11.4371940493584},
                        {lat: 52.5305290478307, lng: 11.4961677789688},
                        {lat: 52.5250454068057, lng: 11.5148721635342},
                        {lat: 52.5148097973354, lng: 11.5037168562412},
                        {lat: 52.5218622801583, lng: 11.4375400543213},
                        {lat: 52.5139226339971, lng: 11.4325618743896},
                        {lat: 52.502847659404, lng: 11.4053535461426},
                        {lat: 52.5049403479772, lng: 11.3999066501856},
                        {lat: 52.5038645258374, lng: 11.3968977145851},
                        {lat: 52.4996485169871, lng: 11.3916103552219},
                        {lat: 52.4975700066318, lng: 11.3970277350595},
                        {lat: 52.4913519330528, lng: 11.3678474500948},
                        {lat: 52.4903591264413, lng: 11.3568593253375},
                        {lat: 52.4969444651616, lng: 11.3568614299346},
                        {lat: 52.5026385268291, lng: 11.3838112077207},
                        {lat: 52.4999459498022, lng: 11.3908425491536},
                        {lat: 52.5040425898424, lng: 11.3953908160329},
                        {lat: 52.5066582618503, lng: 11.3954669237137},
                        {lat: 52.5123033543647, lng: 11.3808059692383},
                        {lat: 52.5227068389322, lng: 11.3556843996048},
                        {lat: 52.5228422932246, lng: 11.355354487896},
                        {lat: 52.5183830980025, lng: 11.3462651520967},
                        {lat: 52.5169132270237, lng: 11.341389734298},
                        {lat: 52.5120946671646, lng: 11.3507642921832},
                        {lat: 52.5036849236894, lng: 11.3378927289887},
                        {lat: 52.5202946802878, lng: 11.3214964304643},
                        {lat: 52.5229063203815, lng: 11.3297368235362},
                        {lat: 52.5173921722709, lng: 11.3404786214232},
                        {lat: 52.5187874594632, lng: 11.3457481563091},
                        {lat: 52.5232780288987, lng: 11.3547670841217},
                        {lat: 52.5316263465384, lng: 11.3476753234863},
                        {lat: 52.5350192327909, lng: 11.3596922904253},
                        {lat: 52.5578831718813, lng: 11.3532516360283}
					];
                var gardelegen1Coords = [
                        {lat: 52.5090646160916, lng: 11.279354095459},
                        {lat: 52.5051170811081, lng: 11.281880736351},
                        {lat: 52.4926874998899, lng: 11.2419476732612},
                        {lat: 52.4953753751331, lng: 11.2399583925799},
                        {lat: 52.4907238370677, lng: 11.1884595219271},
                        {lat: 52.4698679826233, lng: 11.1991037513808},
                        {lat: 52.4884256308176, lng: 11.2451076668617},
                        {lat: 52.4920988282878, lng: 11.2423826311715},
                        {lat: 52.5043511643813, lng: 11.2823766097426},
                        {lat: 52.4897839617798, lng: 11.2916278839111},
                        {lat: 52.4980406700184, lng: 11.308708190918},
                        {lat: 52.5125645325349, lng: 11.2926578521729},
                        {lat: 52.5090646160916, lng: 11.279354095459}
					];
                var duempten0Coords = [
                        {lat: 51.4516000322547, lng: 6.9268798828125},
                        {lat: 51.4318053367488, lng: 6.8753814697266},
                        {lat: 51.4661998074334, lng: 6.8307495117188},
                        {lat: 51.484536495365, lng: 6.8826770782471},
                        {lat: 51.4516000322547, lng: 6.9268798828125}
					];
                var duempten1Coords = [
                        {lat: 51.4577239497838, lng: 6.8159008026123},
                        {lat: 51.4580582011126, lng: 6.8184113502502},
                        {lat: 51.4544347861626, lng: 6.8292474746704},
                        {lat: 51.4538999404075, lng: 6.8338394165039},
                        {lat: 51.4494069886649, lng: 6.8340110778809},
                        {lat: 51.448658120386, lng: 6.8272304534912},
                        {lat: 51.4577239497838, lng: 6.8159008026123}
					];
                 var duempten2Coords = [
                        {lat: 51.4293972885817, lng: 6.8676567077637},
                        {lat: 51.427678132107, lng: 6.8680322170258},
                        {lat: 51.426343567214, lng: 6.8684774637222},
                        {lat: 51.4234686013998, lng: 6.8678525090218},
                        {lat: 51.4231090088892, lng: 6.873471736908},
                        {lat: 51.4275510323679, lng: 6.8759822845459},
                        {lat: 51.4300394471693, lng: 6.8761539459229},
                        {lat: 51.4316548374566, lng: 6.8748450279236},
                        {lat: 51.4319993128829, lng: 6.8706607818604},
                        {lat: 51.4297116798512, lng: 6.8724203109741},
                        {lat: 51.4293972885817, lng: 6.8676567077637}
					];
                var duempten3Coords = [
                        {lat: 51.4263736706112, lng: 6.9788074493408},
                        {lat: 51.4208142402758, lng: 6.9872939586639},
                        {lat: 51.432340441328, lng: 7.0023894309998},
                        {lat: 51.4328220300906, lng: 6.9855451583862},
                        {lat: 51.4263736706112, lng: 6.9788074493408}
					];
                var duempten4Coords = [
                        {lat: 51.4230421076448, lng: 6.8852519989014},
                        {lat: 51.4222693911742, lng: 6.8833637237549},
                        {lat: 51.4204696805206, lng: 6.8827736377716},
                        {lat: 51.4186063366446, lng: 6.8828326463699},
                        {lat: 51.4184792116733, lng: 6.8900263309479},
                        {lat: 51.4202054047733, lng: 6.8920111656189},
                        {lat: 51.421369544706, lng: 6.8926441669464},
                        {lat: 51.4235706248061, lng: 6.8892592191696},
                        {lat: 51.4246978846591, lng: 6.8866869807243},
                        {lat: 51.4241576730955, lng: 6.8850468099117},
                        {lat: 51.4230421076448, lng: 6.8852519989014}
					];
                var duempten5Coords = [
                        {lat: 51.414752285662, lng: 6.8926817178726},
                        {lat: 51.4098506142935, lng: 6.8935614824295},
                        {lat: 51.4091312121569, lng: 6.8939530849457},
                        {lat: 51.4113663408162, lng: 6.901752948761},
                        {lat: 51.4125942766732, lng: 6.9039738178253},
                        {lat: 51.4152608248867, lng: 6.9062805175781},
                        {lat: 51.4164050174582, lng: 6.9049394130707},
                        {lat: 51.4147054462383, lng: 6.9005942344666},
                        {lat: 51.4165789857503, lng: 6.8984967470169},
                        {lat: 51.4168633555713, lng: 6.8977189064026},
                        {lat: 51.414752285662, lng: 6.8926817178726}
					];
                var kloetze0Coords = [
						{lat: 52.6276449735469, lng: 11.1442565917969},
                        {lat: 52.6204287251427, lng: 11.1437845230103},
                        {lat: 52.6137063838635, lng: 11.1420464515686},
                        {lat: 52.6130288813645, lng: 11.1494064331055},
                        {lat: 52.6139539302385, lng: 11.1636114120483},
                        {lat: 52.6181620044807, lng: 11.1724519729614},
                        {lat: 52.6203245106749, lng: 11.1842751502991},
                        {lat: 52.6200770003195, lng: 11.1930191516876},
                        {lat: 52.6293576808934, lng: 11.2017685174942},
                        {lat: 52.6418395342738, lng: 11.1974287033081},
                        {lat: 52.6464875773361, lng: 11.186420917511},
                        {lat: 52.648811413631, lng: 11.1730849742889},
                        {lat: 52.652030080925, lng: 11.1700862646103},
                        {lat: 52.6542340316412, lng: 11.1624701321125},
                        {lat: 52.6531316633872, lng: 11.1539527773857},
                        {lat: 52.6515260610833, lng: 11.1515180021524},
                        {lat: 52.6492955306492, lng: 11.1498986184597},
                        {lat: 52.6444175015195, lng: 11.1496639251709},
                        {lat: 52.6340005389077, lng: 11.1473250389099},
						{lat: 52.6276449735469, lng: 11.1442565917969}
					];
                var kloetze1Coords = [
                        {lat: 52.5890880754627, lng: 11.0867929458618},
                        {lat: 52.5898115740301, lng: 11.0957837104797},
                        {lat: 52.5883580467835, lng: 11.1036157608032},
                        {lat: 52.5857246279971, lng: 11.107349395752},
                        {lat: 52.5798836098109, lng: 11.1090660095215},
                        {lat: 52.5754240943455, lng: 11.0996353626251},
                        {lat: 52.5693339063848, lng: 11.1015504598618},
                        {lat: 52.5700186056901, lng: 11.0902771353722},
                        {lat: 52.5737810006149, lng: 11.0841536521912},
                        {lat: 52.5706022218965, lng: 11.0587933659554},
                        {lat: 52.5734655782561, lng: 11.0545239597559},
                        {lat: 52.5769025000646, lng: 11.051799505949},
                        {lat: 52.5792308472364, lng: 11.0572933405638},
                        {lat: 52.5793424939588, lng: 11.0636883974075},
                        {lat: 52.5796358708521, lng: 11.0820186138153},
                        {lat: 52.5890880754627, lng: 11.0867929458618}
					];
                var kloetze2Coords = [
                        {lat: 52.6356674196271, lng: 11.0704851150513},
                        {lat: 52.6115435507404, lng: 11.0410022735596},
                        {lat: 52.6090939480706, lng: 11.0546493530273},
                        {lat: 52.6164423449934, lng: 11.0589408874512},
                        {lat: 52.6205850463791, lng: 11.0626316070557},
                        {lat: 52.6212363788554, lng: 11.0676956176758},
                        {lat: 52.6192041894766, lng: 11.0834884643555},
                        {lat: 52.6238416118445, lng: 11.0903549194336},
                        {lat: 52.633896356754, lng: 11.0879516601563},
                        {lat: 52.6356674196271, lng: 11.0704851150513}
					];
                //construct the polygon.
                wolfsburgPolygon = new google.maps.Polygon({
                    paths: wolfsburgCoords,
                    strokeColor: '#111111',
                    strokeOpacity: 0.7,
                    strokeWeight: 2,
                    fillColor: '#FF0000',
                    fillOpacity: 0.05
                });
                recklinghausenPolygon = new google.maps.Polygon({
                    paths: recklinghausenCoords,
                    strokeColor: '#111111',
                    strokeOpacity: 0.7,
                    strokeWeight: 2,
                    fillColor: '#FF0000',
                    fillOpacity: 0.05
                });
                bamberg0Polygon = new google.maps.Polygon({
                    paths: bamberg0Coords,
                    strokeColor: '#111111',
                    strokeOpacity: 0.7,
                    strokeWeight: 2,
                    fillColor: '#FF0000',
                    fillOpacity: 0.05
                });
                bamberg1Polygon = new google.maps.Polygon({
                    paths: bamberg1Coords,
                    strokeColor: '#111111',
                    strokeOpacity: 0.7,
                    strokeWeight: 2,
                    fillColor: '#FF0000',
                    fillOpacity: 0.1
                });
                bamberg2Polygon = new google.maps.Polygon({
                    paths: bamberg2Coords,
                    strokeColor: '#111111',
                    strokeOpacity: 0.7,
                    strokeWeight: 2,
                    fillColor: '#FF0000',
                    fillOpacity: 0.1
                });
                bamberg3Polygon = new google.maps.Polygon({
                    paths: bamberg3Coords,
                    strokeColor: '#111111',
                    strokeOpacity: 0.7,
                    strokeWeight: 2,
                    fillColor: '#FF0000',
                    fillOpacity: 0.1
                });
                bamberg4Polygon = new google.maps.Polygon({
                    paths: bamberg4Coords,
                    strokeColor: '#111111',
                    strokeOpacity: 0.7,
                    strokeWeight: 2,
                    fillColor: '#FF0000',
                    fillOpacity: 0.1
                });
                gardelegen0Polygon = new google.maps.Polygon({
                    paths: gardelegen0Coords,
                    strokeColor: '#111111',
                    strokeOpacity: 0.7,
                    strokeWeight: 2,
                    fillColor: '#FF0000',
                    fillOpacity: 0.05
                });
                gardelegen1Polygon = new google.maps.Polygon({
                    paths: gardelegen1Coords,
                    strokeColor: '#111111',
                    strokeOpacity: 0.7,
                    strokeWeight: 2,
                    fillColor: '#FF0000',
                    fillOpacity: 0.05
                });
                duempten0Polygon = new google.maps.Polygon({
                    paths: duempten0Coords,
                    strokeColor: '#111111',
                    strokeOpacity: 0.7,
                    strokeWeight: 2,
                    fillColor: '#FF0000',
                    fillOpacity: 0.05
                });
                duempten1Polygon = new google.maps.Polygon({
                    paths: duempten1Coords,
                    strokeColor: '#111111',
                    strokeOpacity: 0.7,
                    strokeWeight: 2,
                    fillColor: '#FF0000',
                    fillOpacity: 0.1
                });
                duempten2Polygon = new google.maps.Polygon({
                    paths: duempten2Coords,
                    strokeColor: '#111111',
                    strokeOpacity: 0.7,
                    strokeWeight: 2,
                    fillColor: '#FF0000',
                    fillOpacity: 0.1
                });
                duempten3Polygon = new google.maps.Polygon({
                    paths: duempten3Coords,
                    strokeColor: '#111111',
                    strokeOpacity: 0.7,
                    strokeWeight: 2,
                    fillColor: '#FF0000',
                    fillOpacity: 0.1
                });
                duempten4Polygon = new google.maps.Polygon({
                    paths: duempten4Coords,
                    strokeColor: '#111111',
                    strokeOpacity: 0.7,
                    strokeWeight: 2,
                    fillColor: '#FF0000',
                    fillOpacity: 0.1
                });
                duempten5Polygon = new google.maps.Polygon({
                    paths: duempten5Coords,
                    strokeColor: '#111111',
                    strokeOpacity: 0.7,
                    strokeWeight: 2,
                    fillColor: '#FF0000',
                    fillOpacity: 0.1
                });
                kloetze0Polygon = new google.maps.Polygon({
                    paths: kloetze0Coords,
                    strokeColor: '#111111',
                    strokeOpacity: 0.7,
                    strokeWeight: 2,
                    fillColor: '#FF0000',
                    fillOpacity: 0.05
                });
                kloetze1Polygon = new google.maps.Polygon({
                    paths: kloetze1Coords,
                    strokeColor: '#111111',
                    strokeOpacity: 0.7,
                    strokeWeight: 2,
                    fillColor: '#FF0000',
                    fillOpacity: 0.05
                });
                kloetze2Polygon = new google.maps.Polygon({
                    paths: kloetze2Coords,
                    strokeColor: '#111111',
                    strokeOpacity: 0.7,
                    strokeWeight: 2,
                    fillColor: '#FF0000',
                    fillOpacity: 0.05
                });
            }
            console.log('geofence > setting wolfsburgPolygons map')
            wolfsburgPolygon.setMap(map);
            recklinghausenPolygon.setMap(map);
            bamberg0Polygon.setMap(map);
            bamberg1Polygon.setMap(map);
            bamberg2Polygon.setMap(map);
            bamberg3Polygon.setMap(map);
            bamberg4Polygon.setMap(map);
            gardelegen0Polygon.setMap(map);
            gardelegen1Polygon.setMap(map);
            duempten0Polygon.setMap(map);
            duempten1Polygon.setMap(map);
            duempten2Polygon.setMap(map);
            duempten3Polygon.setMap(map);
            duempten4Polygon.setMap(map);
            duempten5Polygon.setMap(map);
            kloetze0Polygon.setMap(map);
            kloetze1Polygon.setMap(map);
            kloetze2Polygon.setMap(map);
        }
    }
    $('#geofence-switch').change(function () {
        console.log('geofence > showGeofence changed! new state:' + Store.get('showGeofence'))
        Store.set('showGeofence', this.checked)
		updateGeofences()
    })
	console.log('geofence > yes, we have a map!')
    $('#geofence-switch').prop('checked', Store.get('showGeofence'))
	updateGeofences()
}





	//TODO: remove
	if(!Store.get('remember_text_perfection_notify')) {
		Store.set('remember_text_perfection_notify', '100')
	}
			if(window.sendToastrPokemonNotification) {
			window.sendToastrPokemonNotification = function(title, text, icon, lat, lon) {
				if(!Store.get('doPush')) {
					return
				}
				var notification = toastr.info(text, title, {
					closeButton: true,
					positionClass: 'toast-top-right',
					preventDuplicates: false,
					onclick: function () {
						centerMap(lat, lon, 20)
					},
					showDuration: '300',
					hideDuration: '500',
					timeOut: '6000',
					extendedTimeOut: '1500',
					showEasing: 'swing',
					hideEasing: 'linear',
					showMethod: 'fadeIn',
					hideMethod: 'fadeOut'
				})
				notification.removeClass('toast-info')
				notification.css({
					'padding-left': '36px',
					'background-image': `url('./${icon}')`,
					'background-size': '36px',
					'background-position': 'left top',
					'background-color': '#283747',
					'height': '40px'
				})
				notification.find('.toast-title').css('font-size', 'smaller')
			};
		}
	/*###########################################################################################################################*/
    /* Settings. */

    const scaleByRarity = false // Enable scaling by rarity. Default: true.
    const upscalePokemon = true // Enable upscaling of certain Pokemon (upscaledPokemon and notify list). Default: false.
    const upscaledPokemon = [] // Add Pokémon IDs separated by commas (e.g. [1, 2, 3]) to upscale icons.

    // Google Analytics property ID. Leave empty to disable.
    // Looks like 'UA-XXXXX-Y'.
    const analyticsKey = 'UA-96781963-1'

    // MOTD.
    const motdEnabled = false
    const motdTitle = 'MOTD'
    const motd = 'Hi there! This is an easily customizable MOTD with optional title!'

    // Only show every unique MOTD message once. If disabled, the MOTD will be
    // shown on every visit. Requires support for localStorage.
    // Updating only the MOTD title (and not the text) will not make the MOTD
    // appear again.
    const motdShowOnlyOnce = true

    // What pages should the MOTD be shown on? By default, homepage and mobile
    // pages.
    const motdShowOnPages = [
        '/',
        '/mobile'
    ]

    // Clustering! Different zoom levels for desktop vs mobile.
    const disableClusters = false // Default: false
    const maxClusterZoomLevel = 12 // Default: 14
    const maxClusterZoomLevelMobile = 12 // Default: same as desktop
    const clusterZoomOnClick = false // Default: false
    const clusterZoomOnClickMobile = false // Default: same as desktop
    const clusterGridSize = 90 // Default: 60
    const clusterGridSizeMobile = 60 // Default: same as desktop

    // Process Pokémon in chunks to improve responsiveness.
    const processPokemonChunkSize = 250 // Default: 100
    const processPokemonChunkSizeMobile = 150 // Default: 100
    const processPokemonIntervalMs = 50 // Default: 100ms
    const processPokemonIntervalMsMobile = 100 // Default: 100ms


    /* Feature detection. */

    const hasStorage = (function () {
        var mod = 'RocketMap'
        try {
            localStorage.setItem(mod, mod)
            localStorage.removeItem(mod)
            return true
        } catch (exception) {
            return false
        }
    }())


    /* Do stuff. */

    const currentPage = window.location.pathname


    // Set custom Store values.
    Store.set('maxClusterZoomLevel', maxClusterZoomLevel)
    Store.set('clusterZoomOnClick', clusterZoomOnClick)
    Store.set('clusterGridSize', clusterGridSize)
    Store.set('processPokemonChunkSize', processPokemonChunkSize)
    Store.set('processPokemonIntervalMs', processPokemonIntervalMs)
    Store.set('scaleByRarity', scaleByRarity)
    Store.set('upscalePokemon', upscalePokemon)
    Store.set('upscaledPokemon', upscaledPokemon)

    if (typeof window.orientation !== "undefined" || isMobileDevice()) {
        Store.set('maxClusterZoomLevel', maxClusterZoomLevelMobile)
        Store.set('clusterZoomOnClick', clusterZoomOnClickMobile)
        Store.set('clusterGridSize', clusterGridSizeMobile)
    }

    if (disableClusters) {
        Store.set('maxClusterZoomLevel', -1)
    }

    // Google Analytics.
    if (analyticsKey.length > 0) {
        window.ga = window.ga || function () {
            (ga.q = ga.q || []).push(arguments)
        }
        ga.l = Date.now
        ga('create', analyticsKey, 'auto')
        ga('send', 'pageview')
    }

    // Show MOTD.
    if (motdEnabled && motdShowOnPages.indexOf(currentPage) !== -1) {
        let motdIsUpdated = true

        if (hasStorage) {
            const lastMOTD = window.localStorage.getItem('lastMOTD') || ''

            if (lastMOTD === motd) {
                motdIsUpdated = false
            }
        }

        if (motdIsUpdated || !motdShowOnlyOnce) {
            window.localStorage.setItem('lastMOTD', motd)

            swal({
                title: motdTitle,
                text: motd
            })
        }
    }
})
